{
  "id": "5ceaa0bf-8634-41da-9432-baaa852fbdb9",
  "prevId": "ccf80836-1269-4247-af13-a365a8c4e92a",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.hideout_levels": {
      "name": "hideout_levels",
      "schema": "",
      "columns": {
        "module_id": {
          "name": "module_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "level": {
          "name": "level",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "other_requirements": {
          "name": "other_requirements",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "hideout_levels_module_id_fkey": {
          "name": "hideout_levels_module_id_fkey",
          "tableFrom": "hideout_levels",
          "tableTo": "hideout_modules",
          "columnsFrom": [
            "module_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "hideout_levels_pkey": {
          "name": "hideout_levels_pkey",
          "columns": [
            "module_id",
            "level"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.hideout_modules": {
      "name": "hideout_modules",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "max_level": {
          "name": "max_level",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.hideout_requirements": {
      "name": "hideout_requirements",
      "schema": "",
      "columns": {
        "module_id": {
          "name": "module_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "level": {
          "name": "level",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "item_id": {
          "name": "item_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "hideout_requirements_item_id_fkey": {
          "name": "hideout_requirements_item_id_fkey",
          "tableFrom": "hideout_requirements",
          "tableTo": "items",
          "columnsFrom": [
            "item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "hideout_requirements_module_id_level_fkey": {
          "name": "hideout_requirements_module_id_level_fkey",
          "tableFrom": "hideout_requirements",
          "tableTo": "hideout_levels",
          "columnsFrom": [
            "module_id",
            "level"
          ],
          "columnsTo": [
            "module_id",
            "level"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "hideout_requirements_pkey": {
          "name": "hideout_requirements_pkey",
          "columns": [
            "module_id",
            "level",
            "item_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.items": {
      "name": "items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rarity": {
          "name": "rarity",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "value": {
          "name": "value",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "weight_kg": {
          "name": "weight_kg",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "image_url": {
          "name": "image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "data": {
          "name": "data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_items_rarity": {
          "name": "idx_items_rarity",
          "columns": [
            {
              "expression": "rarity",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_items_type": {
          "name": "idx_items_type",
          "columns": [
            {
              "expression": "type",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.quest_requirements": {
      "name": "quest_requirements",
      "schema": "",
      "columns": {
        "quest_id": {
          "name": "quest_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "item_id": {
          "name": "item_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "quest_requirements_item_id_fkey": {
          "name": "quest_requirements_item_id_fkey",
          "tableFrom": "quest_requirements",
          "tableTo": "items",
          "columnsFrom": [
            "item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quest_requirements_quest_id_fkey": {
          "name": "quest_requirements_quest_id_fkey",
          "tableFrom": "quest_requirements",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "quest_requirements_pkey": {
          "name": "quest_requirements_pkey",
          "columns": [
            "quest_id",
            "item_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.quest_rewards": {
      "name": "quest_rewards",
      "schema": "",
      "columns": {
        "quest_id": {
          "name": "quest_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "item_id": {
          "name": "item_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "quest_rewards_item_id_fkey": {
          "name": "quest_rewards_item_id_fkey",
          "tableFrom": "quest_rewards",
          "tableTo": "items",
          "columnsFrom": [
            "item_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "quest_rewards_quest_id_fkey": {
          "name": "quest_rewards_quest_id_fkey",
          "tableFrom": "quest_rewards",
          "tableTo": "quests",
          "columnsFrom": [
            "quest_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "quest_rewards_pkey": {
          "name": "quest_rewards_pkey",
          "columns": [
            "quest_id",
            "item_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.quests": {
      "name": "quests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "trader": {
          "name": "trader",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "objectives": {
          "name": "objectives",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "xp": {
          "name": "xp",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_quests_trader": {
          "name": "idx_quests_trader",
          "columns": [
            {
              "expression": "trader",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.skill_nodes": {
      "name": "skill_nodes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "max_points": {
          "name": "max_points",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "icon_url": {
          "name": "icon_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_major": {
          "name": "is_major",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "position": {
          "name": "position",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "known_values": {
          "name": "known_values",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "impacted_skill": {
          "name": "impacted_skill",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_skills_category": {
          "name": "idx_skills_category",
          "columns": [
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.skill_prerequisites": {
      "name": "skill_prerequisites",
      "schema": "",
      "columns": {
        "skill_id": {
          "name": "skill_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "prerequisite_id": {
          "name": "prerequisite_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "skill_prerequisites_prerequisite_id_fkey": {
          "name": "skill_prerequisites_prerequisite_id_fkey",
          "tableFrom": "skill_prerequisites",
          "tableTo": "skill_nodes",
          "columnsFrom": [
            "prerequisite_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "skill_prerequisites_skill_id_fkey": {
          "name": "skill_prerequisites_skill_id_fkey",
          "tableFrom": "skill_prerequisites",
          "tableTo": "skill_nodes",
          "columnsFrom": [
            "skill_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "skill_prerequisites_pkey": {
          "name": "skill_prerequisites_pkey",
          "columns": [
            "skill_id",
            "prerequisite_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.sync_metadata": {
      "name": "sync_metadata",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "synced_at": {
          "name": "synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "items_count": {
          "name": "items_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "quests_count": {
          "name": "quests_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "skills_count": {
          "name": "skills_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "modules_count": {
          "name": "modules_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.material_usage": {
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "quest_required": {
          "name": "quest_required",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "hideout_required": {
          "name": "hideout_required",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "total_required": {
          "name": "total_required",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "SELECT i.id, i.name, i.type, COALESCE(qr.quest_required, 0::bigint) AS quest_required, COALESCE(hr.hideout_required, 0::bigint) AS hideout_required, COALESCE(qr.quest_required, 0::bigint) + COALESCE(hr.hideout_required, 0::bigint) AS total_required FROM items i LEFT JOIN ( SELECT quest_requirements.item_id, sum(quest_requirements.quantity) AS quest_required FROM quest_requirements GROUP BY quest_requirements.item_id) qr ON i.id = qr.item_id LEFT JOIN ( SELECT hideout_requirements.item_id, sum(hideout_requirements.quantity) AS hideout_required FROM hideout_requirements GROUP BY hideout_requirements.item_id) hr ON i.id = hr.item_id WHERE qr.quest_required > 0 OR hr.hideout_required > 0",
      "name": "material_usage",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}